!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.TendermintJS=t():e.TendermintJS=t()}(global,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=66)}([function(e,t,r){var n=t.global=r(49),i=t.hasBuffer=n&&!!n.isBuffer,o=t.hasArrayBuffer="undefined"!=typeof ArrayBuffer,s=t.isArray=r(10);t.isArrayBuffer=o?function(e){return e instanceof ArrayBuffer||d(e)}:v;var a=t.isBuffer=i?n.isBuffer:v,f=t.isView=o?ArrayBuffer.isView||g("ArrayBuffer","buffer"):v;t.alloc=p,t.concat=function(e,r){r||(r=0,Array.prototype.forEach.call(e,function(e){r+=e.length}));var n=this!==t&&this||e[0],i=p.call(n,r),o=0;return Array.prototype.forEach.call(e,function(e){o+=l.copy.call(e,i,o)}),i},t.from=function(e){return"string"==typeof e?function(e){var t=3*e.length,r=p.call(this,t),n=l.write.call(r,e);t!==n&&(r=l.slice.call(r,0,n));return r}.call(this,e):y(this).from(e)};var u=t.Array=r(50),c=t.Buffer=r(51),h=t.Uint8Array=r(52),l=t.prototype=r(11);function p(e){return y(this).alloc(e)}var d=g("ArrayBuffer");function y(e){return a(e)?c:f(e)?h:s(e)?u:i?c:o?h:u}function v(){return!1}function g(e,t){return e="[object "+e+"]",function(r){return null!=r&&{}.toString.call(t?r[t]:r)===e}}},function(e,t,r){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t,r){"use strict";const n=r(38),i=r(39),o=r(5),s=r(1),a=Buffer.from([0,0,255,255]),f=Buffer.from([0]),u=Symbol("permessage-deflate"),c=Symbol("write-in-progress"),h=Symbol("pending-close"),l=Symbol("total-length"),p=Symbol("callback"),d=Symbol("buffers"),y=Symbol("error");let v;function g(e){this[d].push(e),this[l]+=e.length}function m(e){this[l]+=e.length,this[u]._maxPayload<1||this[l]<=this[u]._maxPayload?this[d].push(e):(this[y]=new RangeError("Max payload size exceeded"),this[y][s.kStatusCode]=1009,this.removeListener("data",m),this.reset())}function _(e){this[u]._inflate=null,e[s.kStatusCode]=1007,this[p](e)}e.exports=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!v){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;v=new n({concurrency:e})}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){this._inflate&&(this._inflate[c]?this._inflate[h]=!0:(this._inflate.close(),this._inflate=null)),this._deflate&&(this._deflate[c]?this._deflate[h]=!0:(this._deflate.close(),this._deflate=null))}acceptAsServer(e){const t=this._options,r=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!r)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{var r=e[t];if(r.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){const e=+r;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==r)throw new TypeError(`Invalid value for parameter "${t}": ${r}`)}e[t]=r})}),e}decompress(e,t,r){v.push(n=>{this._decompress(e,t,(e,t)=>{n(),r(e,t)})})}compress(e,t,r){v.push(n=>{this._compress(e,t,(e,t)=>{n(),r(e,t)})})}_decompress(e,t,r){const n=this._isServer?"client":"server";if(!this._inflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:t})),this._inflate[u]=this,this._inflate[l]=0,this._inflate[d]=[],this._inflate.on("error",_),this._inflate.on("data",m)}this._inflate[p]=r,this._inflate[c]=!0,this._inflate.write(e),t&&this._inflate.write(a),this._inflate.flush(()=>{const e=this._inflate[y];if(e)return this._inflate.close(),this._inflate=null,void r(e);const i=o.concat(this._inflate[d],this._inflate[l]);t&&this.params[`${n}_no_context_takeover`]||this._inflate[h]?(this._inflate.close(),this._inflate=null):(this._inflate[c]=!1,this._inflate[l]=0,this._inflate[d]=[]),r(null,i)})}_compress(e,t,r){if(!e||0===e.length)return void process.nextTick(r,null,f);const n=this._isServer?"server":"client";if(!this._deflate){const e=`${n}_max_window_bits`,t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw(Object.assign({},this._options.zlibDeflateOptions,{windowBits:t})),this._deflate[l]=0,this._deflate[d]=[],this._deflate.on("data",g)}this._deflate[c]=!0,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,()=>{var e=o.concat(this._deflate[d],this._deflate[l]);t&&(e=e.slice(0,e.length-4)),t&&this.params[`${n}_no_context_takeover`]||this._deflate[h]?(this._deflate.close(),this._deflate=null):(this._deflate[c]=!1,this._deflate[l]=0,this._deflate[d]=[]),r(null,e)})}}},function(e,t,r){var n=r(10);t.createCodec=a,t.install=function(e){for(var t in e)o.prototype[t]=s(o.prototype[t],e[t])},t.filter=function(e){return n(e)?function(e){return e=e.slice(),function(r){return e.reduce(t,r)};function t(e,t){return t(e)}}(e):e};var i=r(0);function o(e){if(!(this instanceof o))return new o(e);this.options=e,this.init()}function s(e,t){return e&&t?function(){return e.apply(this,arguments),t.apply(this,arguments)}:e||t}function a(e){return new o(e)}o.prototype.init=function(){var e=this.options;return e&&e.uint8array&&(this.bufferish=i.Uint8Array),this},t.preset=a({preset:!0})},function(e,t){e.exports=require("crypto")},function(e,t,r){"use strict";function n(e,t){const r=Buffer.allocUnsafe(t);for(var n=0,i=0;i<e.length;i++){const t=e[i];t.copy(r,n),n+=t.length}return r}function i(e,t,r,n,i){for(var o=0;o<i;o++)r[n+o]=e[o]^t[3&o]}function o(e,t){const r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]}try{const t=r(40),s=t.BufferUtil||t;e.exports={mask(e,t,r,n,o){o<48?i(e,t,r,n,o):s.mask(e,t,r,n,o)},unmask(e,t){e.length<32?o(e,t):s.unmask(e,t)},concat:n}}catch(t){e.exports={concat:n,mask:i,unmask:o}}},function(e,t){e.exports=require("stream")},function(e,t,r){t.EncodeBuffer=i;var n=r(8).preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}r(27).FlexEncoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.write=function(e){this.codec.encode(this,e)}},function(e,t,r){var n=r(9).ExtBuffer,i=r(54),o=r(55),s=r(3);function a(){var e=this.options;return this.encode=function(e){var t=o.getWriteType(e);return function(e,r){var n=t[typeof r];if(!n)throw new Error('Unsupported type "'+typeof r+'": '+r);n(e,r)}}(e),e&&e.preset&&i.setExtPackers(this),this}s.install({addExtPacker:function(e,t,r){r=s.filter(r);var i=t.name;if(i&&"Object"!==i){var o=this.extPackers||(this.extPackers={});o[i]=f}else{var a=this.extEncoderList||(this.extEncoderList=[]);a.unshift([t,f])}function f(t){return r&&(t=r(t)),new n(t,e)}},getExtPacker:function(e){var t=this.extPackers||(this.extPackers={}),r=e.constructor,n=r&&r.name&&t[r.name];if(n)return n;for(var i=this.extEncoderList||(this.extEncoderList=[]),o=i.length,s=0;s<o;s++){var a=i[s];if(r===a[0])return a[1]}},init:a}),t.preset=a.call(s.preset)},function(e,t,r){t.ExtBuffer=function e(t,r){if(!(this instanceof e))return new e(t,r);this.buffer=n.from(t);this.type=r};var n=r(0)},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){var n=r(53);t.copy=f,t.slice=u,t.toString=function(e,t,r){return(!s&&i.isBuffer(this)?this.toString:n.toString).apply(this,arguments)},t.write=function(e){return function(){return(this[e]||n[e]).apply(this,arguments)}}("write");var i=r(0),o=i.global,s=i.hasBuffer&&"TYPED_ARRAY_SUPPORT"in o,a=s&&!o.TYPED_ARRAY_SUPPORT;function f(e,t,r,o){var s=i.isBuffer(this),f=i.isBuffer(e);if(s&&f)return this.copy(e,t,r,o);if(a||s||f||!i.isView(this)||!i.isView(e))return n.copy.call(this,e,t,r,o);var c=r||null!=o?u.call(this,r,o):this;return e.set(c,t),c.length}function u(e,t){var r=this.slice||!a&&this.subarray;if(r)return r.call(this,e,t);var n=i.alloc.call(this,t-e);return f.call(this,n,0,e,t),n}},function(e,t,r){!function(e){var t,r="undefined",n=r!==typeof Buffer&&Buffer,i=r!==typeof Uint8Array&&Uint8Array,o=r!==typeof ArrayBuffer&&ArrayBuffer,s=[0,0,0,0,0,0,0,0],a=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},f=4294967296,u=16777216;function c(a,c,w){var E=c?0:4,x=c?4:0,k=c?0:3,S=c?1:2,B=c?2:1,U=c?3:0,A=c?g:_,T=c?m:b,C=O.prototype,L="is"+a,P="_"+L;return C.buffer=void 0,C.offset=0,C[P]=!0,C.toNumber=I,C.toString=function(e){var t=this.buffer,r=this.offset,n=R(t,r+E),i=R(t,r+x),o="",s=!w&&2147483648&n;s&&(n=~n,i=f-i);e=e||10;for(;;){var a=n%e*f+i;if(n=Math.floor(n/e),i=Math.floor(a/e),o=(a%e).toString(e)+o,!n&&!i)break}s&&(o="-"+o);return o},C.toJSON=I,C.toArray=h,n&&(C.toBuffer=l),i&&(C.toArrayBuffer=p),O[L]=function(e){return!(!e||!e[P])},e[a]=O,O;function O(e,n,a,u){return this instanceof O?function(e,n,a,u,c){i&&o&&(n instanceof o&&(n=new i(n)),u instanceof o&&(u=new i(u)));if(!(n||a||u||t))return void(e.buffer=v(s,0));if(!d(n,a)){var h=t||Array;c=a,u=n,a=0,n=new h(8)}if(e.buffer=n,e.offset=a|=0,r===typeof u)return;"string"==typeof u?function(e,t,r,n){var i=0,o=r.length,s=0,a=0;"-"===r[0]&&i++;var u=i;for(;i<o;){var c=parseInt(r[i++],n);if(!(c>=0))break;a=a*n+c,s=s*n+Math.floor(a/f),a%=f}u&&(s=~s,a?a=f-a:s++);N(e,t+E,s),N(e,t+x,a)}(n,a,u,c||10):d(u,c)?y(n,a,u,c):"number"==typeof c?(N(n,a+E,u),N(n,a+x,c)):u>0?A(n,a,u):u<0?T(n,a,u):y(n,a,s,0)}(this,e,n,a,u):new O(e,n,a,u)}function I(){var e=this.buffer,t=this.offset,r=R(e,t+E),n=R(e,t+x);return w||(r|=0),r?r*f+n:n}function N(e,t,r){e[t+U]=255&r,r>>=8,e[t+B]=255&r,r>>=8,e[t+S]=255&r,r>>=8,e[t+k]=255&r}function R(e,t){return e[t+k]*u+(e[t+S]<<16)+(e[t+B]<<8)+e[t+U]}}function h(e){var r=this.buffer,n=this.offset;return t=null,!1!==e&&0===n&&8===r.length&&a(r)?r:v(r,n)}function l(e){var r=this.buffer,i=this.offset;if(t=n,!1!==e&&0===i&&8===r.length&&Buffer.isBuffer(r))return r;var o=new n(8);return y(o,0,r,i),o}function p(e){var r=this.buffer,n=this.offset,s=r.buffer;if(t=i,!1!==e&&0===n&&s instanceof o&&8===s.byteLength)return s;var a=new i(8);return y(a,0,r,n),a.buffer}function d(e,t){var r=e&&e.length;return t|=0,r&&t+8<=r&&"string"!=typeof e[t]}function y(e,t,r,n){t|=0,n|=0;for(var i=0;i<8;i++)e[t++]=255&r[n++]}function v(e,t){return Array.prototype.slice.call(e,t,t+8)}function g(e,t,r){for(var n=t+8;n>t;)e[--n]=255&r,r/=256}function m(e,t,r){var n=t+8;for(r++;n>t;)e[--n]=255&-r^255,r/=256}function _(e,t,r){for(var n=t+8;t<n;)e[t++]=255&r,r/=256}function b(e,t,r){var n=t+8;for(r++;t<n;)e[t++]=255&-r^255,r/=256}c("Uint64BE",!0,!0),c("Int64BE",!0,!1),c("Uint64LE",!1,!0),c("Int64LE",!1,!1)}("string"!=typeof t.nodeName?t:this||{})},function(e,t){t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,f=(1<<a)-1,u=f>>1,c=-7,h=r?i-1:0,l=r?-1:1,p=e[t+h];for(h+=l,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+e[t+h],h+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+e[t+h],h+=l,c-=8);if(0===o)o=1-u;else{if(o===f)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=u}return(p?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,f,u=8*o-i-1,c=(1<<u)-1,h=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-s))<1&&(s--,f*=2),(t+=s+h>=1?l/f:l*Math.pow(2,1-h))*f>=2&&(s++,f/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(t*f-1)*Math.pow(2,i),s+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;e[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+p]=255&s,p+=d,s/=256,u-=8);e[r+p-d]|=128*y}},function(e,t,r){t.DecodeBuffer=i;var n=r(15).preset;function i(e){if(!(this instanceof i))return new i(e);if(e&&(this.options=e,e.codec)){var t=this.codec=e.codec;t.bufferish&&(this.bufferish=t.bufferish)}}r(27).FlexDecoder.mixin(i.prototype),i.prototype.codec=n,i.prototype.fetch=function(){return this.codec.decode(this)}},function(e,t,r){var n=r(9).ExtBuffer,i=r(57),o=r(29).readUint8,s=r(58),a=r(3);function f(){var e=this.options;return this.decode=function(e){var t=s.getReadToken(e);return function(e){var r=o(e),n=t[r];if(!n)throw new Error("Invalid type: "+(r?"0x"+r.toString(16):r));return n(e)}}(e),e&&e.preset&&i.setExtUnpackers(this),this}a.install({addExtUnpacker:function(e,t){(this.extUnpackers||(this.extUnpackers=[]))[e]=a.filter(t)},getExtUnpacker:function(e){return(this.extUnpackers||(this.extUnpackers=[]))[e]||function(t){return new n(t,e)}},init:f}),t.preset=f.call(a.preset)},function(e,t,r){"use strict";const n=r(17),i=r(4),o=r(34),s=r(18),a=r(35),f=r(36),u=r(37),c=r(2),h=r(45),l=r(20),p=r(1),d=r(21),y=r(23),v=["CONNECTING","OPEN","CLOSING","CLOSED"],g=p.kWebSocket,m=[8,13],_=3e4;class b extends n{constructor(e,t,r){super(),this.readyState=b.CONNECTING,this.protocol="",this._binaryType=p.BINARY_TYPES[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._isServer=!0,this._receiver=null,this._sender=null,this._socket=null,null!==e&&(Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(r=t,t=void 0),function(e,t,r){if(r=Object.assign({protocolVersion:m[1],perMessageDeflate:!0,maxPayload:104857600},r,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0}),-1===m.indexOf(r.protocolVersion))throw new RangeError(`Unsupported protocol version: ${r.protocolVersion} `+`(supported versions: ${m.join(", ")})`);var n;this._isServer=!1,"object"==typeof e&&void 0!==e.href?(n=e,this.url=e.href):(n=u.URL?new u.URL(e):u.parse(e),this.url=e);const a="ws+unix:"===n.protocol;if(!(n.host||a&&n.pathname))throw new Error(`Invalid URL: ${this.url}`);const f="wss:"===n.protocol||"https:"===n.protocol,h=i.randomBytes(16).toString("base64"),d=f?o:s,y=n.search?`${n.pathname||"/"}${n.search}`:n.pathname||"/";var v;r.createConnection=f?E:w,r.port=n.port||(f?443:80),r.host=n.hostname.startsWith("[")?n.hostname.slice(1,-1):n.hostname,r.headers=Object.assign({"Sec-WebSocket-Version":r.protocolVersion,"Sec-WebSocket-Key":h,Connection:"Upgrade",Upgrade:"websocket"},r.headers),r.path=y,r.perMessageDeflate&&(v=new c(!0!==r.perMessageDeflate?r.perMessageDeflate:{},!1,r.maxPayload),r.headers["Sec-WebSocket-Extensions"]=l.format({[c.extensionName]:v.offer()}));t&&(r.headers["Sec-WebSocket-Protocol"]=t);r.origin&&(r.protocolVersion<13?r.headers["Sec-WebSocket-Origin"]=r.origin:r.headers.Origin=r.origin);n.auth?r.auth=n.auth:(n.username||n.password)&&(r.auth=`${n.username}:${n.password}`);if(a){const e=y.split(":");r.socketPath=e[0],r.path=e[1]}var g=this._req=d.get(r);r.handshakeTimeout&&g.setTimeout(r.handshakeTimeout,()=>x(this,g,"Opening handshake has timed out"));g.on("error",e=>{this._req.aborted||(g=this._req=null,this.readyState=b.CLOSING,this.emit("error",e),this.emitClose())}),g.on("response",e=>{this.emit("unexpected-response",g,e)||x(this,g,`Unexpected server response: ${e.statusCode}`)}),g.on("upgrade",(e,n,o)=>{if(this.emit("upgrade",e),this.readyState!==b.CONNECTING)return;g=this._req=null;const s=i.createHash("sha1").update(h+p.GUID,"binary").digest("base64");if(e.headers["sec-websocket-accept"]!==s)return void x(this,n,"Invalid Sec-WebSocket-Accept header");const a=e.headers["sec-websocket-protocol"],f=(t||"").split(/, */);var u;if(!t&&a?u="Server sent a subprotocol but none was requested":t&&!a?u="Server sent no subprotocol":a&&-1===f.indexOf(a)&&(u="Server sent an invalid subprotocol"),u)x(this,n,u);else{if(a&&(this.protocol=a),v)try{const t=l.parse(e.headers["sec-websocket-extensions"]);t[c.extensionName]&&(v.accept(t[c.extensionName]),this._extensions[c.extensionName]=v)}catch(e){return void x(this,n,"Invalid Sec-WebSocket-Extensions header")}this.setSocket(n,o,r.maxPayload)}})}.call(this,e,t,r))}get CONNECTING(){return b.CONNECTING}get CLOSING(){return b.CLOSING}get CLOSED(){return b.CLOSED}get OPEN(){return b.OPEN}get binaryType(){return this._binaryType}set binaryType(e){p.BINARY_TYPES.indexOf(e)<0||(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(e,t,r){const n=new d(this._binaryType,this._extensions,r);this._sender=new y(e,this._extensions),this._receiver=n,this._socket=e,n[g]=this,e[g]=this,n.on("conclude",k),n.on("drain",S),n.on("error",B),n.on("message",A),n.on("ping",T),n.on("pong",C),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",L),e.on("data",P),e.on("end",O),e.on("error",I),this.readyState=b.OPEN,this.emit("open")}emitClose(){this.readyState=b.CLOSED,this._socket?(this._extensions[c.extensionName]&&this._extensions[c.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit("close",this._closeCode,this._closeMessage)):this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==b.CLOSED){if(this.readyState===b.CONNECTING){const e="WebSocket was closed before the connection was established";return x(this,this._req,e)}this.readyState!==b.CLOSING?(this.readyState=b.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._socket.writable&&(this._closeFrameReceived&&this._socket.end(),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),_)))})):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,r){if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),this.readyState!==b.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${v[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.ping(e||p.EMPTY_BUFFER,t,r)}pong(e,t,r){if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),this.readyState!==b.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${v[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString()),void 0===t&&(t=!this._isServer),this._sender.pong(e||p.EMPTY_BUFFER,t,r)}send(e,t,r){if("function"==typeof t&&(r=t,t={}),this.readyState!==b.OPEN){const e=new Error(`WebSocket is not open: readyState ${this.readyState} `+`(${v[this.readyState]})`);if(r)return r(e);throw e}"number"==typeof e&&(e=e.toString());const n=Object.assign({binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0},t);this._extensions[c.extensionName]||(n.compress=!1),this._sender.send(e||p.EMPTY_BUFFER,n,r)}terminate(){if(this.readyState!==b.CLOSED){if(this.readyState===b.CONNECTING){const e="WebSocket was closed before the connection was established";return x(this,this._req,e)}this._socket&&(this.readyState=b.CLOSING,this._socket.destroy())}}}function w(e){return e.protocolVersion&&(e.path=e.socketPath),a.connect(e)}function E(e){return e.path=void 0,e.servername=e.servername||e.host,f.connect(e)}function x(e,t,r){e.readyState=b.CLOSING;const n=new Error(r);Error.captureStackTrace(n,x),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",n)):(t.destroy(n),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function k(e,t){const r=this[g];r._socket.removeListener("data",P),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,1005===e?r.close():r.close(e,t)}function S(){this[g]._socket.resume()}function B(e){const t=this[g];t._socket.removeListener("data",P),t.readyState=b.CLOSING,t._closeCode=e[p.kStatusCode],t.emit("error",e),t._socket.destroy()}function U(){this[g].emitClose()}function A(e){this[g].emit("message",e)}function T(e){const t=this[g];t.pong(e,!t._isServer,p.NOOP),t.emit("ping",e)}function C(e){this[g].emit("pong",e)}function L(){const e=this[g];this.removeListener("close",L),this.removeListener("end",O),e.readyState=b.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",P),this[g]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",U),e._receiver.on("finish",U))}function P(e){this[g]._receiver.write(e)||this.pause()}function O(){const e=this[g];e.readyState=b.CLOSING,e._receiver.end(),this.end()}function I(){const e=this[g];this.removeListener("error",I),this.on("error",p.NOOP),e&&(e.readyState=b.CLOSING,this.destroy())}v.forEach((e,t)=>{b[v[t]]=t}),["open","error","close","message"].forEach(e=>{Object.defineProperty(b.prototype,`on${e}`,{get(){const t=this.listeners(e);for(var r=0;r<t.length;r++)if(t[r]._listener)return t[r]._listener},set(t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]._listener&&this.removeListener(e,r[n]);this.addEventListener(e,t)}})}),b.prototype.addEventListener=h.addEventListener,b.prototype.removeEventListener=h.removeEventListener,e.exports=b},function(e,t){e.exports=require("events")},function(e,t){e.exports=require("http")},function(e,t,r){var n=r(41),i=r(42),o=r(43),s=require,a=process.versions.modules,f=process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE||"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?"electron":"node",u=o.arch(),c=o.platform();function h(e){return s(h.path(e))}function l(e,t){try{var r=n.readdirSync(e).filter(t);return r[0]&&i.join(e,r[0])}catch(e){return null}}function p(e){return e===f+"-napi.node"}function d(e){return"node-napi.node"===e}function y(e){var t=e.split("-");return t[0]===f&&t[1]===a+".node"}function v(e){return/\.node$/.test(e)}e.exports=h,h.path=function(e){e=i.resolve(e||".");try{var t=s(i.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch(e){}var r=l(i.join(e,"build/Release"),v);if(r)return r;var n=l(i.join(e,"build/Debug"),v);if(n)return n;var o=l(i.join(e,"prebuilds/"+c+"-"+u),y);if(o)return o;var h=l(i.join(e,"prebuilds/"+c+"-"+u),p);if(h)return h;var g=l(i.join(e,"prebuilds/"+c+"-"+u),d);if(g)return g;throw new Error("No native build was found for runtime="+f+" abi="+a+" platform="+c+" arch="+u)}},function(e,t,r){"use strict";const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function i(e,t,r){Object.prototype.hasOwnProperty.call(e,t)?e[t].push(r):e[t]=[r]}e.exports={format:function(e){return Object.keys(e).map(t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{var r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t={};if(void 0===e||""===e)return t;for(var r,o,s={},a=!1,f=!1,u=!1,c=-1,h=-1,l=0;l<e.length;l++){const d=e.charCodeAt(l);if(void 0===r)if(-1===h&&1===n[d])-1===c&&(c=l);else if(32===d||9===d)-1===h&&-1!==c&&(h=l);else{if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${l}`);{if(-1===c)throw new SyntaxError(`Unexpected character at index ${l}`);-1===h&&(h=l);const n=e.slice(c,h);44===d?(i(t,n,s),s={}):r=n,c=h=-1}}else if(void 0===o)if(-1===h&&1===n[d])-1===c&&(c=l);else if(32===d||9===d)-1===h&&-1!==c&&(h=l);else if(59===d||44===d){if(-1===c)throw new SyntaxError(`Unexpected character at index ${l}`);-1===h&&(h=l),i(s,e.slice(c,h),!0),44===d&&(i(t,r,s),s={},r=void 0),c=h=-1}else{if(61!==d||-1===c||-1!==h)throw new SyntaxError(`Unexpected character at index ${l}`);o=e.slice(c,l),c=h=-1}else if(f){if(1!==n[d])throw new SyntaxError(`Unexpected character at index ${l}`);-1===c?c=l:a||(a=!0),f=!1}else if(u)if(1===n[d])-1===c&&(c=l);else if(34===d&&-1!==c)u=!1,h=l;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${l}`);f=!0}else if(34===d&&61===e.charCodeAt(l-1))u=!0;else if(-1===h&&1===n[d])-1===c&&(c=l);else if(-1===c||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${l}`);if(-1===c)throw new SyntaxError(`Unexpected character at index ${l}`);-1===h&&(h=l);var p=e.slice(c,h);a&&(p=p.replace(/\\/g,""),a=!1),i(s,o,p),44===d&&(i(t,r,s),s={},r=void 0),o=void 0,c=h=-1}else-1===h&&(h=l)}if(-1===c||u)throw new SyntaxError("Unexpected end of input");-1===h&&(h=l);const d=e.slice(c,h);return void 0===r?i(t,d,{}):(void 0===o?i(s,d,!0):i(s,o,a?d.replace(/\\/g,""):d),i(t,r,s)),t}}},function(e,t,r){"use strict";const n=r(6),i=r(2),o=r(5),s=r(22),a=r(1),f=0,u=1,c=2,h=3,l=4,p=5;function d(e,t,r,n){const i=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(i,d),i[a.kStatusCode]=n,i}function y(e,t){return 1===e.length?e[0]:e.length>1?o.concat(e,t):a.EMPTY_BUFFER}e.exports=class extends n.Writable{constructor(e,t,r){super(),this._binaryType=e||a.BINARY_TYPES[0],this[a.kWebSocket]=void 0,this._extensions=t||{},this._maxPayload=0|r,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=f,this._loop=!1}_write(e,t,r){if(8===this._opcode)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const r=this._buffers[0];e>=r.length?this._buffers.shift().copy(t,t.length-e):(r.copy(t,t.length-e,0,e),this._buffers[0]=r.slice(e)),e-=r.length}while(e>0);return t}startLoop(e){var t;this._loop=!0;do{switch(this._state){case f:t=this.getInfo();break;case u:t=this.getPayloadLength16();break;case c:t=this.getPayloadLength64();break;case h:this.getMask();break;case l:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,d(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[i.extensionName])return this._loop=!1,d(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,d(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,d(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,d(RangeError,`invalid opcode ${this._opcode}`,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,d(RangeError,`invalid opcode ${this._opcode}`,!0,1002);if(!this._fin)return this._loop=!1,d(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,d(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,d(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),126===this._payloadLength)this._state=u;else{if(127!==this._payloadLength)return this.haveLength();this._state=c}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,d(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,d(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=h:this._state=l}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=l)}getData(e){var t=a.EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&o.unmask(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=p,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[i.extensionName].decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(d(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(r)}const n=this.dataMessage();if(n)return t(n);this.startLoop(t)})}dataMessage(){if(this._fin){const r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var e;e="nodebuffer"===this._binaryType?y(n,r):"arraybuffer"===this._binaryType?0===(t=y(n,r)).byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength):n,this.emit("message",e)}else{const e=y(n,r);if(!s.isValidUTF8(e))return this._loop=!1,d(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",e.toString())}}var t;this._state=f}controlMessage(e){if(8!==this._opcode)9===this._opcode?this.emit("ping",e):this.emit("pong",e),this._state=f;else if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return d(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!s.isValidStatusCode(t))return d(RangeError,`invalid status code ${t}`,!0,1002);const r=e.slice(2);if(!s.isValidUTF8(r))return d(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,r.toString()),this.end()}}}}},function(e,t,r){"use strict";try{const e=r(46);t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=(()=>!0)}t.isValidStatusCode=(e=>e>=1e3&&e<=1013&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999)},function(e,t,r){"use strict";const n=r(4),i=r(2),o=r(5),s=r(22),a=r(1);class f{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const r=e.length<1024||t.mask&&t.readOnly;var i=t.mask?6:2,s=e.length;e.length>=65536?(i+=8,s=127):e.length>125&&(i+=2,s=126);const a=Buffer.allocUnsafe(r?e.length+i:i);if(a[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(a[0]|=64),126===s?a.writeUInt16BE(e.length,2):127===s&&(a.writeUInt32BE(0,2),a.writeUInt32BE(e.length,6)),!t.mask)return a[1]=s,r?(e.copy(a,i),[a]):[a,e];const f=n.randomBytes(4);return a[1]=128|s,a[i-4]=f[0],a[i-3]=f[1],a[i-2]=f[2],a[i-1]=f[3],r?(o.mask(e,f,a,i,e.length),[a]):(o.mask(e,f,e,0,e.length),[a,e])}close(e,t,r,n){var i;if(void 0===e)i=a.EMPTY_BUFFER;else{if("number"!=typeof e||!s.isValidStatusCode(e))throw new TypeError("First argument must be a valid error code number");void 0===t||""===t?(i=Buffer.allocUnsafe(2)).writeUInt16BE(e,0):((i=Buffer.allocUnsafe(2+Buffer.byteLength(t))).writeUInt16BE(e,0),i.write(t,2))}this._deflating?this.enqueue([this.doClose,i,r,n]):this.doClose(i,r,n)}doClose(e,t,r){this.sendFrame(f.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),r)}ping(e,t,r){var n=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=u(e):(e=Buffer.from(e),n=!1)),this._deflating?this.enqueue([this.doPing,e,t,n,r]):this.doPing(e,t,n,r)}doPing(e,t,r,n){this.sendFrame(f.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:r}),n)}pong(e,t,r){var n=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=u(e):(e=Buffer.from(e),n=!1)),this._deflating?this.enqueue([this.doPong,e,t,n,r]):this.doPong(e,t,n,r)}doPong(e,t,r,n){this.sendFrame(f.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:r}),n)}send(e,t,r){var n=t.binary?2:1,o=t.compress,s=!0;Buffer.isBuffer(e)||(e instanceof ArrayBuffer?e=Buffer.from(e):ArrayBuffer.isView(e)?e=u(e):(e=Buffer.from(e),s=!1));const a=this._extensions[i.extensionName];if(this._firstFragment?(this._firstFragment=!1,o&&a&&(o=e.length>=a._threshold),this._compress=o):(o=!1,n=0),t.fin&&(this._firstFragment=!0),a){const i={fin:t.fin,rsv1:o,opcode:n,mask:t.mask,readOnly:s};this._deflating?this.enqueue([this.dispatch,e,this._compress,i,r]):this.dispatch(e,this._compress,i,r)}else this.sendFrame(f.frame(e,{fin:t.fin,rsv1:!1,opcode:n,mask:t.mask,readOnly:s}),r)}dispatch(e,t,r,n){if(!t)return void this.sendFrame(f.frame(e,r),n);const o=this._extensions[i.extensionName];this._deflating=!0,o.compress(e,r.fin,(e,t)=>{if(this._deflating=!1,!this._socket.readable&&!this._socket.writable)return this._bufferedBytes=0,void(this._queue.length=0);r.readOnly=!1,this.sendFrame(f.frame(t,r),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,e[0].apply(this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.write(e[0]),this._socket.write(e[1],t)):this._socket.write(e[0],t)}}function u(e){const t=Buffer.from(e.buffer);return e.byteLength!==e.buffer.byteLength?t.slice(e.byteOffset,e.byteOffset+e.byteLength):t}e.exports=f},function(e,t,r){t.encode=r(25).encode,t.decode=r(28).decode,t.Encoder=r(59).Encoder,t.Decoder=r(60).Decoder,t.createEncodeStream=r(61).createEncodeStream,t.createDecodeStream=r(62).createDecodeStream,t.createCodec=r(63).createCodec,t.codec=r(64).codec},function(e,t,r){t.encode=function(e,t){var r=new n(t);return r.write(e),r.read()};var n=r(7).EncodeBuffer},function(e,t){for(var r=t.uint8=new Array(256),n=0;n<=255;n++)r[n]=i(n);function i(e){return function(t){var r=t.reserve(1);t.buffer[r]=e}}},function(e,t,r){t.FlexDecoder=a,t.FlexEncoder=f;var n=r(0),i=2048,o=65536,s="BUFFER_SHORTAGE";function a(){if(!(this instanceof a))return new a}function f(){if(!(this instanceof f))return new f}function u(){throw new Error("method not implemented: write()")}function c(){throw new Error("method not implemented: fetch()")}function h(){return this.buffers&&this.buffers.length?(this.flush(),this.pull()):this.fetch()}function l(e){(this.buffers||(this.buffers=[])).push(e)}function p(){return(this.buffers||(this.buffers=[])).shift()}function d(e){return function(t){for(var r in e)t[r]=e[r];return t}}a.mixin=d(function(){return{bufferish:n,write:function(e){var t=this.offset?n.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=t?e?this.bufferish.concat([t,e]):t:e,this.offset=0},fetch:c,flush:function(){for(;this.offset<this.buffer.length;){var e,t=this.offset;try{e=this.fetch()}catch(e){if(e&&e.message!=s)throw e;this.offset=t;break}this.push(e)}},push:l,pull:p,read:h,reserve:function(e){var t=this.offset,r=t+e;if(r>this.buffer.length)throw new Error(s);return this.offset=r,t},offset:0}}()),a.mixin(a.prototype),f.mixin=d(function(){return{bufferish:n,write:u,fetch:function(){var e=this.start;if(e<this.offset){var t=this.start=this.offset;return n.prototype.slice.call(this.buffer,e,t)}},flush:function(){for(;this.start<this.offset;){var e=this.fetch();e&&this.push(e)}},push:l,pull:function(){var e=this.buffers||(this.buffers=[]),t=e.length>1?this.bufferish.concat(e):e[0];return e.length=0,t},read:h,reserve:function(e){var t=0|e;if(this.buffer){var r=this.buffer.length,n=0|this.offset,i=n+t;if(i<r)return this.offset=i,n;this.flush(),e=Math.max(e,Math.min(2*r,this.maxBufferSize))}return e=Math.max(e,this.minBufferSize),this.buffer=this.bufferish.alloc(e),this.start=0,this.offset=t,0},send:function(e){var t=e.length;if(t>this.minBufferSize)this.flush(),this.push(e);else{var r=this.reserve(t);n.prototype.copy.call(e,this.buffer,r)}},maxBufferSize:o,minBufferSize:i,offset:0,start:0}}()),f.mixin(f.prototype)},function(e,t,r){t.decode=function(e,t){var r=new n(t);return r.write(e),r.read()};var n=r(14).DecodeBuffer},function(e,t,r){var n=r(13),i=r(12),o=i.Uint64BE,s=i.Int64BE;t.getReadFormat=function(e){var t=a.hasArrayBuffer&&e&&e.binarraybuffer,r=e&&e.int64;return{map:u&&e&&e.usemap?l:h,array:p,str:d,bin:t?v:y,ext:g,uint8:m,uint16:b,uint32:E,uint64:k(8,r?U:S),int8:_,int16:w,int32:x,int64:k(8,r?A:B),float32:k(4,T),float64:k(8,C)}},t.readUint8=m;var a=r(0),f=r(11),u="undefined"!=typeof Map,c=!0;function h(e,t){var r,n={},i=new Array(t),o=new Array(t),s=e.codec.decode;for(r=0;r<t;r++)i[r]=s(e),o[r]=s(e);for(r=0;r<t;r++)n[i[r]]=o[r];return n}function l(e,t){var r,n=new Map,i=new Array(t),o=new Array(t),s=e.codec.decode;for(r=0;r<t;r++)i[r]=s(e),o[r]=s(e);for(r=0;r<t;r++)n.set(i[r],o[r]);return n}function p(e,t){for(var r=new Array(t),n=e.codec.decode,i=0;i<t;i++)r[i]=n(e);return r}function d(e,t){var r=e.reserve(t),n=r+t;return f.toString.call(e.buffer,"utf-8",r,n)}function y(e,t){var r=e.reserve(t),n=r+t,i=f.slice.call(e.buffer,r,n);return a.from(i)}function v(e,t){var r=e.reserve(t),n=r+t,i=f.slice.call(e.buffer,r,n);return a.Uint8Array.from(i).buffer}function g(e,t){var r=e.reserve(t+1),n=e.buffer[r++],i=r+t,o=e.codec.getExtUnpacker(n);if(!o)throw new Error("Invalid ext type: "+(n?"0x"+n.toString(16):n));return o(f.slice.call(e.buffer,r,i))}function m(e){var t=e.reserve(1);return e.buffer[t]}function _(e){var t=e.reserve(1),r=e.buffer[t];return 128&r?r-256:r}function b(e){var t=e.reserve(2),r=e.buffer;return r[t++]<<8|r[t]}function w(e){var t=e.reserve(2),r=e.buffer,n=r[t++]<<8|r[t];return 32768&n?n-65536:n}function E(e){var t=e.reserve(4),r=e.buffer;return 16777216*r[t++]+(r[t++]<<16)+(r[t++]<<8)+r[t]}function x(e){var t=e.reserve(4),r=e.buffer;return r[t++]<<24|r[t++]<<16|r[t++]<<8|r[t]}function k(e,t){return function(r){var n=r.reserve(e);return t.call(r.buffer,n,c)}}function S(e){return new o(this,e).toNumber()}function B(e){return new s(this,e).toNumber()}function U(e){return new o(this,e)}function A(e){return new s(this,e)}function T(e){return n.read(this,e,!1,23,4)}function C(e){return n.read(this,e,!1,52,8)}},function(e,t,r){!function(t){e.exports=t;var r="listeners",n={on:function(e,t){return s(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,s(r,e).push(n),r;function n(){o.call(r,e,n),t.apply(this,arguments)}},off:o,emit:function(e,t){var r=this,n=s(r,e,!0);if(!n)return!1;var i=arguments.length;if(1===i)n.forEach(function(e){e.call(r)});else if(2===i)n.forEach(function(e){e.call(r,t)});else{var o=Array.prototype.slice.call(arguments,1);n.forEach(function(e){e.apply(r,o)})}return!!n.length}};function i(e){for(var t in n)e[t]=n[t];return e}function o(e,t){var n;if(arguments.length){if(t){if(n=s(this,e,!0)){if(!(n=n.filter(function(e){return e!==t&&e.originalListener!==t})).length)return o.call(this,e);this[r][e]=n}}else if((n=this[r])&&(delete n[e],!Object.keys(n).length))return o.call(this)}else delete this[r];return this}function s(e,t,n){if(!n||e[r]){var i=e[r]||(e[r]={});return i[t]||(i[t]=[])}}i(t.prototype),t.mixin=i}(
/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */
function e(){if(!(this instanceof e))return new e})},function(e,t){e.exports=require("util")},function(e,t,r){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var n=r(65),i=r(13);t.Buffer=a,t.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},t.INSPECT_MAX_BYTES=50;var o=2147483647;function s(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=a.prototype,t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return f(e,t,r)}function f(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|p(e,t),n=s(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(D(e,ArrayBuffer)||e&&D(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return n.__proto__=a.prototype,n}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return a.from(n,t,r);var i=function(e){if(a.isBuffer(e)){var t=0|l(e.length),r=s(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(void 0!==e.length)return"number"!=typeof e.length||$(e.length)?s(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|l(e))}function h(e){for(var t=e.length<0?0:0|l(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function l(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function p(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||D(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(i)return n?-1:M(e).length;t=(""+t).toLowerCase(),i=!0}}function d(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),$(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var o,s=1,a=e.length,f=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,f/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===f)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+f>a&&(r=a-f),o=r;o>=0;o--){for(var h=!0,l=0;l<f;l++)if(u(e,o+l)!==u(t,l)){h=!1;break}if(h)return o}return-1}function g(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if($(a))return s;e[r+s]=a}return s}function m(e,t,r,n){return F(M(t,e.length-r),e,r,n)}function _(e,t,r,n){return F(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return _(e,t,r,n)}function w(e,t,r,n){return F(j(t),e,r,n)}function E(e,t,r,n){return F(function(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function x(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function k(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,f,u=e[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(f=(31&u)<<6|63&o)>127&&(c=f);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(f=(15&u)<<12|(63&o)<<6|63&s)>2047&&(f<55296||f>57343)&&(c=f);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(f=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&f<1114112&&(c=f)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=S));return r}(n)}t.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(e,t,r){return f(e,t,r)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)}(e,t,r)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(D(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),D(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(D(o,Uint8Array)&&(o=a.from(o)),!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)d(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return B(this,t,r);case"latin1":case"binary":return U(this,t,r);case"base64":return x(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a.prototype.compare=function(e,t,r,n,i){if(D(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),f=Math.min(o,s),u=this.slice(n,i),c=e.slice(t,r),h=0;h<f;++h)if(u[h]!==c[h]){o=u[h],s=c[h];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return m(this,e,t,r);case"ascii":return _(this,e,t,r);case"latin1":case"binary":return b(this,e,t,r);case"base64":return w(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function B(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function U(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function A(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=R(e[o]);return i}function T(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function P(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function O(e,t,r,n,o){return t=+t,r>>>=0,o||P(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function I(e,t,r,n,o){return t=+t,r>>>=0,o||P(e,0,r,8),i.write(e,t,r,n,52,8),r+8}a.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=a.prototype,n},a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||L(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||L(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return O(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return O(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return I(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return I(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var o=i-1;o>=0;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,n),f=s.length;if(0===f)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%f]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function R(e){return e<16?"0"+e.toString(16):e.toString(16)}function M(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function j(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function D(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!=e}},function(e,t,r){"use strict";const n=r(16);n.Server=r(48),n.Receiver=r(21),n.Sender=r(23),e.exports=n},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("tls")},function(e,t){e.exports=require("url")},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);e=e||{},this.concurrency=e.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=function(){this.pending--,this._run()}.bind(this)}["push","unshift","splice"].forEach(function(e){n.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this._run(),t}}),Object.defineProperty(n.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),n.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var e=this.jobs.shift();this.pending++,e(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var t=this.cbs.pop();process.nextTick(t)}}},n.prototype.onDone=function(e){"function"==typeof e&&(this.cbs.push(e),this._run())},e.exports=n},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";(function(t){try{e.exports=r(19)(t)}catch(t){e.exports=r(44)}}).call(this,"/")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";e.exports={mask:(e,t,r,n,i)=>{for(var o=0;o<i;o++)r[n+o]=e[o]^t[3&o]},unmask:(e,t)=>{const r=e.length;for(var n=0;n<r;n++)e[n]^=t[3&n]}}},function(e,t,r){"use strict";class n{constructor(e,t){this.target=t,this.type=e}}class i extends n{constructor(e,t){super("message",t),this.data=e}}class o extends n{constructor(e,t,r){super("close",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=t,this.code=e}}class s extends n{constructor(e){super("open",e)}}class a extends n{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const f={addEventListener(e,t){function r(e){t.call(this,new i(e,this))}function n(e,r){t.call(this,new o(e,r,this))}function f(e){t.call(this,new a(e,this))}function u(){t.call(this,new s(this))}"function"==typeof t&&("message"===e?(r._listener=t,this.on(e,r)):"close"===e?(n._listener=t,this.on(e,n)):"error"===e?(f._listener=t,this.on(e,f)):"open"===e?(u._listener=t,this.on(e,u)):this.on(e,t))},removeEventListener(e,t){const r=this.listeners(e);for(var n=0;n<r.length;n++)r[n]!==t&&r[n]._listener!==t||this.removeListener(e,r[n])}};e.exports=f},function(e,t,r){"use strict";(function(t){try{e.exports=r(19)(t)}catch(t){e.exports=r(47)}}).call(this,"/")},function(e,t,r){"use strict";e.exports=(e=>{for(var t=e.length,r=0;r<t;)if(e[r]<128)r++;else if(192==(224&e[r])){if(r+1===t||128!=(192&e[r+1])||192==(254&e[r]))return!1;r+=2}else if(224==(240&e[r])){if(r+2>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||224===e[r]&&128==(224&e[r+1])||237===e[r]&&160==(224&e[r+1]))return!1;r+=3}else{if(240!=(248&e[r]))return!1;if(r+3>=t||128!=(192&e[r+1])||128!=(192&e[r+2])||128!=(192&e[r+3])||240===e[r]&&128==(240&e[r+1])||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0})},function(e,t,r){"use strict";const n=r(17),i=r(4),o=r(18),s=r(2),a=r(20),f=r(1),u=r(16);function c(e){e.emit("close")}function h(){this.destroy()}function l(e,t,r,n){e.writable&&(r=r||o.STATUS_CODES[t],n=Object.assign({Connection:"close","Content-type":"text/html","Content-Length":Buffer.byteLength(r)},n),e.write(`HTTP/1.1 ${t} ${o.STATUS_CODES[t]}\r\n`+Object.keys(n).map(e=>`${e}: ${n[e]}`).join("\r\n")+"\r\n\r\n"+r)),e.removeListener("error",h),e.destroy()}e.exports=class extends n{constructor(e,t){if(super(),null==(e=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},e)).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');null!=e.port?(this._server=o.createServer((e,t)=>{const r=o.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server&&(this._removeListeners=function(e,t){for(const r of Object.keys(t))e.on(r,t[r]);return function(){for(const r of Object.keys(t))e.removeListener(r,t[r])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(e,t,r)=>{this.handleUpgrade(e,t,r,t=>{this.emit("connection",t,e)})}})),!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close(()=>this.emit("close")):process.nextTick(c,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,n){t.on("error",h);const i=+e.headers["sec-websocket-version"],o={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!e.headers["sec-websocket-key"]||8!==i&&13!==i||!this.shouldHandle(e))return l(t,400);if(this.options.perMessageDeflate){const r=new s(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const n=a.parse(e.headers["sec-websocket-extensions"]);n[s.extensionName]&&(r.accept(n[s.extensionName]),o[s.extensionName]=r)}catch(e){return l(t,400)}}if(this.options.verifyClient){const s={origin:e.headers[`${8===i?"sec-websocket-origin":"origin"}`],secure:!(!e.connection.authorized&&!e.connection.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,(i,s,a,f)=>{if(!i)return l(t,s||401,a,f);this.completeUpgrade(o,e,t,r,n)});if(!this.options.verifyClient(s))return l(t,401)}this.completeUpgrade(o,e,t,r,n)}completeUpgrade(e,t,r,n,o){if(!r.readable||!r.writable)return r.destroy();const c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i.createHash("sha1").update(t.headers["sec-websocket-key"]+f.GUID,"binary").digest("base64")}`],l=new u(null);var p=t.headers["sec-websocket-protocol"];if(p&&(p=p.trim().split(/ *, */),(p=this.options.handleProtocols?this.options.handleProtocols(p,t):p[0])&&(c.push(`Sec-WebSocket-Protocol: ${p}`),l.protocol=p)),e[s.extensionName]){const t=e[s.extensionName].params,r=a.format({[s.extensionName]:[t]});c.push(`Sec-WebSocket-Extensions: ${r}`),l._extensions=e}this.emit("headers",c,t),r.write(c.concat("\r\n").join("\r\n")),r.removeListener("error",h),l.setSocket(r,n,this.options.maxPayload),this.clients&&(this.clients.add(l),l.on("close",()=>this.clients.delete(l))),o(l)}}},function(e,t){function r(e){return e&&e.isBuffer&&e}e.exports=r("undefined"!=typeof Buffer&&Buffer)||r(this.Buffer)||r("undefined"!=typeof window&&window.Buffer)||this.Buffer},function(e,t,r){var n=r(0);function i(e){return new Array(e)}(t=e.exports=i(0)).alloc=i,t.concat=n.concat,t.from=function(e){if(!n.isBuffer(e)&&n.isView(e))e=n.Uint8Array.from(e);else if(n.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return n.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(e)}},function(e,t,r){var n=r(0),i=n.global;function o(e){return new i(e)}(t=e.exports=n.hasBuffer?o(0):[]).alloc=n.hasBuffer&&i.alloc||o,t.concat=n.concat,t.from=function(e){if(!n.isBuffer(e)&&n.isView(e))e=n.Uint8Array.from(e);else if(n.isArrayBuffer(e))e=new Uint8Array(e);else{if("string"==typeof e)return n.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return i.from&&1!==i.from.length?i.from(e):new i(e)}},function(e,t,r){var n=r(0);function i(e){return new Uint8Array(e)}(t=e.exports=n.hasArrayBuffer?i(0):[]).alloc=i,t.concat=n.concat,t.from=function(e){if(n.isView(e)){var r=e.byteOffset,i=e.byteLength;(e=e.buffer).byteLength!==i&&(e.slice?e=e.slice(r,r+i):(e=new Uint8Array(e)).byteLength!==i&&(e=Array.prototype.slice.call(e,r,r+i)))}else{if("string"==typeof e)return n.from.call(t,e);if("number"==typeof e)throw new TypeError('"value" argument must not be a number')}return new Uint8Array(e)}},function(e,t){t.copy=function(e,t,r,n){var i;r||(r=0);n||0===n||(n=this.length);t||(t=0);var o=n-r;if(e===this&&r<t&&t<n)for(i=o-1;i>=0;i--)e[i+t]=this[i+r];else for(i=0;i<o;i++)e[i+t]=this[i+r];return o},t.toString=function(e,t,r){var n=0|t;r||(r=this.length);var i="",o=0;for(;n<r;)(o=this[n++])<128?i+=String.fromCharCode(o):(192==(224&o)?o=(31&o)<<6|63&this[n++]:224==(240&o)?o=(15&o)<<12|(63&this[n++])<<6|63&this[n++]:240==(248&o)&&(o=(7&o)<<18|(63&this[n++])<<12|(63&this[n++])<<6|63&this[n++]),o>=65536?(o-=65536,i+=String.fromCharCode(55296+(o>>>10),56320+(1023&o))):i+=String.fromCharCode(o));return i},t.write=function(e,t){var r=t||(t|=0),n=e.length,i=0,o=0;for(;o<n;)(i=e.charCodeAt(o++))<128?this[r++]=i:i<2048?(this[r++]=192|i>>>6,this[r++]=128|63&i):i<55296||i>57343?(this[r++]=224|i>>>12,this[r++]=128|i>>>6&63,this[r++]=128|63&i):(i=65536+(i-55296<<10|e.charCodeAt(o++)-56320),this[r++]=240|i>>>18,this[r++]=128|i>>>12&63,this[r++]=128|i>>>6&63,this[r++]=128|63&i);return r-t}},function(e,t,r){t.setExtPackers=function(e){e.addExtPacker(14,Error,[h,f]),e.addExtPacker(1,EvalError,[h,f]),e.addExtPacker(2,RangeError,[h,f]),e.addExtPacker(3,ReferenceError,[h,f]),e.addExtPacker(4,SyntaxError,[h,f]),e.addExtPacker(5,TypeError,[h,f]),e.addExtPacker(6,URIError,[h,f]),e.addExtPacker(10,RegExp,[c,f]),e.addExtPacker(11,Boolean,[u,f]),e.addExtPacker(12,String,[u,f]),e.addExtPacker(13,Date,[Number,f]),e.addExtPacker(15,Number,[u,f]),"undefined"!=typeof Uint8Array&&(e.addExtPacker(17,Int8Array,s),e.addExtPacker(18,Uint8Array,s),e.addExtPacker(19,Int16Array,s),e.addExtPacker(20,Uint16Array,s),e.addExtPacker(21,Int32Array,s),e.addExtPacker(22,Uint32Array,s),e.addExtPacker(23,Float32Array,s),"undefined"!=typeof Float64Array&&e.addExtPacker(24,Float64Array,s),"undefined"!=typeof Uint8ClampedArray&&e.addExtPacker(25,Uint8ClampedArray,s),e.addExtPacker(26,ArrayBuffer,s),e.addExtPacker(29,DataView,s));i.hasBuffer&&e.addExtPacker(27,o,i.from)};var n,i=r(0),o=i.global,s=i.Uint8Array.from,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function f(e){return n||(n=r(25).encode),n(e)}function u(e){return e.valueOf()}function c(e){(e=RegExp.prototype.toString.call(e).split("/")).shift();var t=[e.pop()];return t.unshift(e.join("/")),t}function h(e){var t={};for(var r in a)t[r]=e[r];return t}},function(e,t,r){var n=r(10),i=r(12),o=i.Uint64BE,s=i.Int64BE,a=r(0),f=r(11),u=r(56),c=r(26).uint8,h=r(9).ExtBuffer,l="undefined"!=typeof Uint8Array,p="undefined"!=typeof Map,d=[];d[1]=212,d[2]=213,d[4]=214,d[8]=215,d[16]=216,t.getWriteType=function(e){var t=u.getWriteToken(e),r=e&&e.useraw,i=l&&e&&e.binarraybuffer,y=i?a.isArrayBuffer:a.isBuffer,v=i?function(e,t){b(e,new Uint8Array(t))}:b,g=p&&e&&e.usemap?function(e,r){if(!(r instanceof Map))return w(e,r);var n=r.size;t[n<16?128+n:n<=65535?222:223](e,n);var i=e.codec.encode;r.forEach(function(t,r,n){i(e,r),i(e,t)})}:w;return{boolean:function(e,r){t[r?195:194](e,r)},function:_,number:function(e,r){var n,i=0|r;if(r!==i)return void t[n=203](e,r);n=-32<=i&&i<=127?255&i:0<=i?i<=255?204:i<=65535?205:206:-128<=i?208:-32768<=i?209:210;t[n](e,i)},object:r?function(e,r){if(y(r))return function(e,r){var n=r.length;t[n<32?160+n:n<=65535?218:219](e,n),e.send(r)}(e,r);m(e,r)}:m,string:function(e){return function(r,n){var i=n.length,o=5+3*i;r.offset=r.reserve(o);var s=r.buffer,a=e(i),u=r.offset+a;i=f.write.call(s,n,u);var c=e(i);if(a!==c){var h=u+c-a,l=u+i;f.copy.call(s,s,h,u,l)}t[1===c?160+i:c<=3?215+c:219](r,i),r.offset+=i}}(r?function(e){return e<32?1:e<=65535?3:5}:function(e){return e<32?1:e<=255?2:e<=65535?3:5}),symbol:_,undefined:_};function m(e,r){if(null===r)return _(e,r);if(y(r))return v(e,r);if(n(r))return function(e,r){var n=r.length;t[n<16?144+n:n<=65535?220:221](e,n);for(var i=e.codec.encode,o=0;o<n;o++)i(e,r[o])}(e,r);if(o.isUint64BE(r))return function(e,r){t[207](e,r.toArray())}(e,r);if(s.isInt64BE(r))return function(e,r){t[211](e,r.toArray())}(e,r);var i=e.codec.getExtPacker(r);if(i&&(r=i(r)),r instanceof h)return function(e,r){var n=r.buffer,i=n.length,o=d[i]||(i<255?199:i<=65535?200:201);t[o](e,i),c[r.type](e),e.send(n)}(e,r);g(e,r)}function _(e,r){t[192](e,r)}function b(e,r){var n=r.length,i=n<255?196:n<=65535?197:198;t[i](e,n),e.send(r)}function w(e,r){var n=Object.keys(r),i=n.length,o=i<16?128+i:i<=65535?222:223;t[o](e,i);var s=e.codec.encode;n.forEach(function(t){s(e,t),s(e,r[t])})}}},function(e,t,r){var n=r(13),i=r(12),o=i.Uint64BE,s=i.Int64BE,a=r(26).uint8,f=r(0),u=f.global,c=f.hasBuffer&&"TYPED_ARRAY_SUPPORT"in u&&!u.TYPED_ARRAY_SUPPORT,h=f.hasBuffer&&u.prototype||{};function l(){var e=a.slice();return e[196]=p(196),e[197]=d(197),e[198]=y(198),e[199]=p(199),e[200]=d(200),e[201]=y(201),e[202]=v(202,4,h.writeFloatBE||_,!0),e[203]=v(203,8,h.writeDoubleBE||b,!0),e[204]=p(204),e[205]=d(205),e[206]=y(206),e[207]=v(207,8,g),e[208]=p(208),e[209]=d(209),e[210]=y(210),e[211]=v(211,8,m),e[217]=p(217),e[218]=d(218),e[219]=y(219),e[220]=d(220),e[221]=y(221),e[222]=d(222),e[223]=y(223),e}function p(e){return function(t,r){var n=t.reserve(2),i=t.buffer;i[n++]=e,i[n]=r}}function d(e){return function(t,r){var n=t.reserve(3),i=t.buffer;i[n++]=e,i[n++]=r>>>8,i[n]=r}}function y(e){return function(t,r){var n=t.reserve(5),i=t.buffer;i[n++]=e,i[n++]=r>>>24,i[n++]=r>>>16,i[n++]=r>>>8,i[n]=r}}function v(e,t,r,n){return function(i,o){var s=i.reserve(t+1);i.buffer[s++]=e,r.call(i.buffer,o,s,n)}}function g(e,t){new o(this,t,e)}function m(e,t){new s(this,t,e)}function _(e,t){n.write(this,e,t,!1,23,4)}function b(e,t){n.write(this,e,t,!1,52,8)}t.getWriteToken=function(e){return e&&e.uint8array?((t=l())[202]=v(202,4,_),t[203]=v(203,8,b),t):c||f.hasBuffer&&e&&e.safe?function(){var e=a.slice();return e[196]=v(196,1,u.prototype.writeUInt8),e[197]=v(197,2,u.prototype.writeUInt16BE),e[198]=v(198,4,u.prototype.writeUInt32BE),e[199]=v(199,1,u.prototype.writeUInt8),e[200]=v(200,2,u.prototype.writeUInt16BE),e[201]=v(201,4,u.prototype.writeUInt32BE),e[202]=v(202,4,u.prototype.writeFloatBE),e[203]=v(203,8,u.prototype.writeDoubleBE),e[204]=v(204,1,u.prototype.writeUInt8),e[205]=v(205,2,u.prototype.writeUInt16BE),e[206]=v(206,4,u.prototype.writeUInt32BE),e[207]=v(207,8,g),e[208]=v(208,1,u.prototype.writeInt8),e[209]=v(209,2,u.prototype.writeInt16BE),e[210]=v(210,4,u.prototype.writeInt32BE),e[211]=v(211,8,m),e[217]=v(217,1,u.prototype.writeUInt8),e[218]=v(218,2,u.prototype.writeUInt16BE),e[219]=v(219,4,u.prototype.writeUInt32BE),e[220]=v(220,2,u.prototype.writeUInt16BE),e[221]=v(221,4,u.prototype.writeUInt32BE),e[222]=v(222,2,u.prototype.writeUInt16BE),e[223]=v(223,4,u.prototype.writeUInt32BE),e}():l();var t}},function(e,t,r){t.setExtUnpackers=function(e){e.addExtUnpacker(14,[a,u(Error)]),e.addExtUnpacker(1,[a,u(EvalError)]),e.addExtUnpacker(2,[a,u(RangeError)]),e.addExtUnpacker(3,[a,u(ReferenceError)]),e.addExtUnpacker(4,[a,u(SyntaxError)]),e.addExtUnpacker(5,[a,u(TypeError)]),e.addExtUnpacker(6,[a,u(URIError)]),e.addExtUnpacker(10,[a,f]),e.addExtUnpacker(11,[a,c(Boolean)]),e.addExtUnpacker(12,[a,c(String)]),e.addExtUnpacker(13,[a,c(Date)]),e.addExtUnpacker(15,[a,c(Number)]),"undefined"!=typeof Uint8Array&&(e.addExtUnpacker(17,c(Int8Array)),e.addExtUnpacker(18,c(Uint8Array)),e.addExtUnpacker(19,[h,c(Int16Array)]),e.addExtUnpacker(20,[h,c(Uint16Array)]),e.addExtUnpacker(21,[h,c(Int32Array)]),e.addExtUnpacker(22,[h,c(Uint32Array)]),e.addExtUnpacker(23,[h,c(Float32Array)]),"undefined"!=typeof Float64Array&&e.addExtUnpacker(24,[h,c(Float64Array)]),"undefined"!=typeof Uint8ClampedArray&&e.addExtUnpacker(25,c(Uint8ClampedArray)),e.addExtUnpacker(26,h),e.addExtUnpacker(29,[h,c(DataView)]));i.hasBuffer&&e.addExtUnpacker(27,c(o))};var n,i=r(0),o=i.global,s={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function a(e){return n||(n=r(28).decode),n(e)}function f(e){return RegExp.apply(null,e)}function u(e){return function(t){var r=new e;for(var n in s)r[n]=t[n];return r}}function c(e){return function(t){return new e(t)}}function h(e){return new Uint8Array(e).buffer}},function(e,t,r){var n=r(29);function i(e){var t,r=new Array(256);for(t=0;t<=127;t++)r[t]=o(t);for(t=128;t<=143;t++)r[t]=a(t-128,e.map);for(t=144;t<=159;t++)r[t]=a(t-144,e.array);for(t=160;t<=191;t++)r[t]=a(t-160,e.str);for(r[192]=o(null),r[193]=null,r[194]=o(!1),r[195]=o(!0),r[196]=s(e.uint8,e.bin),r[197]=s(e.uint16,e.bin),r[198]=s(e.uint32,e.bin),r[199]=s(e.uint8,e.ext),r[200]=s(e.uint16,e.ext),r[201]=s(e.uint32,e.ext),r[202]=e.float32,r[203]=e.float64,r[204]=e.uint8,r[205]=e.uint16,r[206]=e.uint32,r[207]=e.uint64,r[208]=e.int8,r[209]=e.int16,r[210]=e.int32,r[211]=e.int64,r[212]=a(1,e.ext),r[213]=a(2,e.ext),r[214]=a(4,e.ext),r[215]=a(8,e.ext),r[216]=a(16,e.ext),r[217]=s(e.uint8,e.str),r[218]=s(e.uint16,e.str),r[219]=s(e.uint32,e.str),r[220]=s(e.uint16,e.array),r[221]=s(e.uint32,e.array),r[222]=s(e.uint16,e.map),r[223]=s(e.uint32,e.map),t=224;t<=255;t++)r[t]=o(t-256);return r}function o(e){return function(){return e}}function s(e,t){return function(r){var n=e(r);return t(r,n)}}function a(e,t){return function(r){return t(r,e)}}t.getReadToken=function(e){var t=n.getReadFormat(e);return e&&e.useraw?function(e){var t,r=i(e).slice();for(r[217]=r[196],r[218]=r[197],r[219]=r[198],t=160;t<=191;t++)r[t]=a(t-160,e.bin);return r}(t):i(t)}},function(e,t,r){t.Encoder=o;var n=r(30),i=r(7).EncodeBuffer;function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}o.prototype=new i,n.mixin(o.prototype),o.prototype.encode=function(e){this.write(e),this.emit("data",this.read())},o.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")}},function(e,t,r){t.Decoder=o;var n=r(30),i=r(14).DecodeBuffer;function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}o.prototype=new i,n.mixin(o.prototype),o.prototype.decode=function(e){arguments.length&&this.write(e),this.flush()},o.prototype.push=function(e){this.emit("data",e)},o.prototype.end=function(e){this.decode(e),this.emit("end")}},function(e,t,r){t.createEncodeStream=a;var n=r(31),i=r(6).Transform,o=r(7).EncodeBuffer;n.inherits(a,i);var s={objectMode:!0};function a(e){if(!(this instanceof a))return new a(e);e?e.objectMode=!0:e=s,i.call(this,e);var t=this;(this.encoder=new o(e)).push=function(e){t.push(e)}}a.prototype._transform=function(e,t,r){this.encoder.write(e),r&&r()},a.prototype._flush=function(e){this.encoder.flush(),e&&e()}},function(e,t,r){t.createDecodeStream=a;var n=r(31),i=r(6).Transform,o=r(14).DecodeBuffer;n.inherits(a,i);var s={objectMode:!0};function a(e){if(!(this instanceof a))return new a(e);e?e.objectMode=!0:e=s,i.call(this,e);var t=this;(this.decoder=new o(e)).push=function(e){t.push(e)}}a.prototype._transform=function(e,t,r){this.decoder.write(e),this.decoder.flush(),r&&r()}},function(e,t,r){r(15),r(8),t.createCodec=r(3).createCodec},function(e,t,r){r(15),r(8),t.codec={preset:r(3).preset}},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){for(var t,r=u(e),n=r[0],s=r[1],a=new o(function(e,t,r){return 3*(t+r)/4-r}(0,n,s)),f=0,c=s>0?n-4:n,h=0;h<c;h+=4)t=i[e.charCodeAt(h)]<<18|i[e.charCodeAt(h+1)]<<12|i[e.charCodeAt(h+2)]<<6|i[e.charCodeAt(h+3)],a[f++]=t>>16&255,a[f++]=t>>8&255,a[f++]=255&t;2===s&&(t=i[e.charCodeAt(h)]<<2|i[e.charCodeAt(h+1)]>>4,a[f++]=255&t);1===s&&(t=i[e.charCodeAt(h)]<<10|i[e.charCodeAt(h+1)]<<4|i[e.charCodeAt(h+2)]>>2,a[f++]=t>>8&255,a[f++]=255&t);return a},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(c(e,s,s+16383>a?a:s+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,f=s.length;a<f;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t,r){"use strict";r.r(t);var n=function e(t){var r,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i=void 0,(n="options")in(r=this)?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,this.options=t};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"events",{}),o(this,"getNextId",(t=0,function(){return t+=1}))}var t,r,n;return t=e,(r=[{key:"emit",value:function(e,t){var r=this,n=this.events[e];n&&Object.keys(n).forEach(function(n){return r.events[e][n](t)})}},{key:"on",value:function(e,t){var r=this,n=this.getNextId();return this.events[e]||(this.events[e]={}),this.events[e][n]=t,{off:function(){delete r.events[e][n],0===Object.keys(r.events[e]).length&&delete r.events[e]}}}},{key:"off",value:function(e){delete this.events[e]}}])&&i(t.prototype,r),n&&i(t,n),e}();function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r(24).decode,u=r(32).Buffer,c=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"last_commit",void 0),a(this,"data",void 0),a(this,"header",void 0),a(this,"block_meta",void 0),a(this,"txs",[]),this.last_commit=t.last_commit,this.block_meta=t.block_meta,this.header=t.header,this.data=t.data,t.data.txs&&(this.txs=t.data.txs.map(function(e){return f(u.from(e,"base64"))}))};function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=r(24).decode,p=r(32).Buffer,d=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"proof",void 0),h(this,"tx",void 0),h(this,"tx",void 0),h(this,"tx_result",void 0),h(this,"index",void 0),h(this,"height",void 0),h(this,"hash",void 0),h(this,"tx_decoded",void 0),h(this,"result",{tags:null}),this.proof=t.proof,this.tx=t.tx,this.tx_decoded=l(p.from(t.tx,"base64")),this.tx_result=t.tx_result||t.result,this.index=t.index,this.height=t.height,this.hash=t.hash,this.tx_result.tags&&(this.result.tags=this.tx_result.tags.reduce(function(e,t){return e[atob(t.key)]=t.value?atob(t.value):null,e},{}))};function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=r(33),m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"isNode",!1),v(this,"isSynced",!1),v(this,"$events",void 0),v(this,"options",void 0),v(this,"connection",void 0),this.isNode="undefined"==typeof window,this.options=t,this.$events=new s}var t,r,n;return t=e,(r=[{key:"connect",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise(function(r,n){e.options.node_ws||(console.error("You need set node_ws property in connect method arguments"),n());var i=function(t){var r=e.isNode?JSON.parse(t):JSON.parse(t.data),n=r.result.data;n?"tendermint/event/NewBlock"===n.type?e.$events.emit("block",{type:"block",data:new c(n.value.block)}):"tendermint/event/Tx"===n.type&&e.$events.emit("tx",{type:"tx",data:new d(n.value.TxResult)}):e.$events.emit("unknown",{type:"unknown",data:r})},o=function(){e.isSynced=!0,e.options.logs&&console.info("Connected to node web socket"),t.forEach(function(t){return e.action("subscribe",t)}),r()},s=function(t){e.connection=null,e.isSynced=!1,console.error("TendermintWebSocket/Errors: Error in web socket connection:",t),n()},a=function(e){console.error("TendermintWebSocket/Errors: Socket error:",e),n()};try{var f="".concat(e.options.node_ws,"/websocket");e.isNode?(e.connection=new g(f),e.connection.on("open",function(){return o()}),e.connection.on("close",function(e){return s(e)}),e.connection.on("error",function(e){return a(e)}),e.connection.on("message",function(e){return i(e)})):(e.connection=new WebSocket(f),e.connection.onopen=function(){return o()},e.connection.onclose=function(e){return s(e)},e.connection.onerror=function(e){return a(e)},e.connection.onmessage=function(e){return i(e)})}catch(e){console.error("TendermintWebSocket/Errors: Error in web socket connection: ".concat(e)),n()}})}},{key:"action",value:function(e,t){try{var r;if("blocks"===t)r={id:"".concat(e,"-out-blocks"),query:"tm.event='NewBlock'"};else{if("txs"!==t)return;r={id:"".concat(e,"-out-txs"),query:"tm.event='Tx'"}}this.connection.send(JSON.stringify({id:r.id,jsonrpc:"2.0",params:{query:r.query},method:e}))}catch(e){console.error(e)}}}])&&y(t.prototype,r),n&&y(t,n),e}();function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"default",function(){return w});var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"socket",void 0),b(this,"rpc",void 0),b(this,"options",void 0),this.options=t,this.socket=new m(t),this.rpc=new n(t)}var t,r,i;return t=e,(r=[{key:"test",value:function(){return"ok"}}])&&_(t.prototype,r),i&&_(t,i),e}();b(w,"createBlockModel",function(e){return new c(e)}),b(w,"createTxModel",function(e){return new d(e)})}]).default});